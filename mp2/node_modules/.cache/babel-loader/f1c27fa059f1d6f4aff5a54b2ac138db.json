{"ast":null,"code":"import _regeneratorRuntime from\"/Users/yusenwang/cs498rk/mp2/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/yusenwang/cs498rk/mp2/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/yusenwang/cs498rk/mp2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/yusenwang/cs498rk/mp2/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import Search from'./Search';import axios from'axios';import List from'./List';import Popup from'./Popup';import _ from'lodash';import{utils}from'../Utils';function TabHomeContent(){var _useState=useState({s:\"\",list:[],selected:{}}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var apiurl=\"https://api.spotify.com/v1/browse/new-releases\";var popupurl=\"https://api.spotify.com/v1/albums/\";function updateNewRelease(){return _updateNewRelease.apply(this,arguments);}// call when the page is rendered\nfunction _updateNewRelease(){_updateNewRelease=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var config;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return utils.getConfig();case 2:config=_context2.sent;axios.get(apiurl,config).then(function(_ref3){var data=_ref3.data;var list=data.albums.items;console.log(\"finished\");console.log(data.albums.items);setState(function(prevState){return _objectSpread({},prevState,{list:list});});});case 4:case\"end\":return _context2.stop();}}},_callee2);}));return _updateNewRelease.apply(this,arguments);}useEffect(function(){updateNewRelease();},[]);// api request\nvar handleInput=function handleInput(e){var s=e.target.value;setState(function(prevState){return _objectSpread({},prevState,{s:s});});};// const getNewRelease = (e) => {\n//     axios.get(apiurl,config).then(({ data }) => {\n//         let list = data.albums.items;\n//         console.log(\"finished\");\n//         console.log(data.albums.items);\n//         setState(prevState => {\n//             return { ... prevState, list: list}\n//         })\n//     });\n// }\n// shows detail page \nvar openPopup=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var config;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return utils.getConfig();case 2:config=_context.sent;axios(popupurl+id,config).then(function(_ref2){var data=_ref2.data;var result=data;setState(function(prevState){return _objectSpread({},prevState,{selected:result});});});case 4:case\"end\":return _context.stop();}}},_callee);}));return function openPopup(_x){return _ref.apply(this,arguments);};}();var closePopup=function closePopup(){setState(function(prevState){return _objectSpread({},prevState,{selected:{}});});};var ascendArray=function ascendArray(e){console.log(\"asecend clicked\");_.reverse(state.list);setState(function(state){return _objectSpread({},state);});};var descendArray=function descendArray(e){console.log(\"descend clicked\");_.reverse(state.list);setState(function(state){return _objectSpread({},state);});};return React.createElement(\"div\",null,React.createElement(\"main\",null,React.createElement(\"div\",{className:\"descending-btn\"},React.createElement(\"h5\",{onClick:ascendArray},\"Ascending\"),React.createElement(\"h6\",{onClick:descendArray},\"Descending\")),React.createElement(List,{list:state.list,openPopup:openPopup}),typeof state.selected.name!=\"undefined\"?React.createElement(Popup,{selected:state.selected,closePopup:closePopup}):false));}export default TabHomeContent;","map":{"version":3,"sources":["/Users/yusenwang/cs498rk/mp2/src/components/TabHomeContent.js"],"names":["React","useState","useEffect","Search","axios","List","Popup","_","utils","TabHomeContent","s","list","selected","state","setState","apiurl","popupurl","updateNewRelease","getConfig","config","get","then","data","albums","items","console","log","prevState","handleInput","e","target","value","openPopup","id","result","closePopup","ascendArray","reverse","descendArray","name"],"mappings":"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","sourcesContent":["\nimport React, { useState, useEffect } from 'react';\nimport Search from './Search'\nimport axios from 'axios'\n\nimport List from './List'\nimport Popup from './Popup'\nimport _ from 'lodash'\nimport { utils } from '../Utils'\n\nfunction TabHomeContent(){\n\n    const [state, setState] = useState({\n        s: \"\",\n        list: [],\n        selected: {}\n    }); \n    \n    const apiurl = \"https://api.spotify.com/v1/browse/new-releases\"\n    const popupurl = \"https://api.spotify.com/v1/albums/\"\n    \n\n    async function updateNewRelease(){\n        let config = await utils.getConfig();\n        axios.get(apiurl,config).then(({ data }) => {\n            let list = data.albums.items;\n            console.log(\"finished\");\n            console.log(data.albums.items);\n            setState(prevState => {\n                return { ... prevState, list: list}\n            })\n        });\n    }\n\n    // call when the page is rendered\n    useEffect(() => { updateNewRelease() }, []);\n  \n\n        \n        // api request\n    \n\n    const handleInput = (e) => {\n        let s = e.target.value;\n        \n        setState(prevState => {\n            return { ...prevState, s: s}\n        });\n    \n    }\n        \n    \n\n\n    // const getNewRelease = (e) => {\n    //     axios.get(apiurl,config).then(({ data }) => {\n    //         let list = data.albums.items;\n    //         console.log(\"finished\");\n    //         console.log(data.albums.items);\n    //         setState(prevState => {\n    //             return { ... prevState, list: list}\n    //         })\n    //     });\n    // }\n\n    // shows detail page \n    const openPopup = async id => {\n        let config = await utils.getConfig();\n        axios(popupurl + id, config).then(({ data }) => {\n            let result = data;\n\n            setState(prevState => {\n            return { ... prevState, selected: result}\n            });\n        });\n    }\n    \n    const closePopup = () => {\n        setState(prevState => {\n            return { ...prevState, selected: {}}\n        });\n    }\n\n\n    const ascendArray = (e) => {\n        console.log(\"asecend clicked\");\n        _.reverse(state.list);\n        setState(state=> ({\n            ... state\n        }))\n    }\n\n    const descendArray = (e) => {\n        console.log(\"descend clicked\");\n        _.reverse(state.list);\n        setState(state=> ({\n            ... state\n        }))\n    }\n    \n    return (\n        <div>\n            <main>\n               \n                <div className=\"descending-btn\">\n                    <h5 onClick={ascendArray} >Ascending</h5>\n                    <h6 onClick={descendArray} >Descending</h6>\n                </div>\n                <List list={state.list} openPopup={openPopup}/>\n\n                {(typeof state.selected.name != \"undefined\") ? <Popup selected={state.selected} closePopup = {closePopup} />: false}\n            </main>\n        </div>\n\n    )\n}\n\nexport default TabHomeContent;"]},"metadata":{},"sourceType":"module"}