{"ast":null,"code":"import _regeneratorRuntime from\"/Users/yusenwang/cs498rk/mp2/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/yusenwang/cs498rk/mp2/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/yusenwang/cs498rk/mp2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/yusenwang/cs498rk/mp2/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import Search from'./Search';import axios from'axios';import Results from'./Results';import Popup from'./Popup';import qs from'querystring';import{utils}from'../Utils';function TabSearchContent(){var _useState=useState({s:\"\",results:[],selected:{}}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var apiurl=\"https://api.spotify.com/v1/search?\";var popupurl=\"https://api.spotify.com/v1/albums/\";var search=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var config;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(e.key==\"Enter\")){_context.next=5;break;}_context.next=3;return utils.getConfig();case 3:config=_context.sent;axios.get(apiurl+\"q=\"+state.s+\"&type=album\",config).then(function(_ref2){var data=_ref2.data;var results=data.albums.items;console.log(\"finished\");console.log(data.albums.items);setState(function(prevState){return _objectSpread({},prevState,{results:results});});});case 5:case\"end\":return _context.stop();}}},_callee);}));return function search(_x){return _ref.apply(this,arguments);};}();var handleInput=function handleInput(e){var s=e.target.value;setState(function(prevState){return _objectSpread({},prevState,{s:s});});};// shows detail page \nvar openPopup=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){var config;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return utils.getConfig();case 2:config=_context2.sent;axios(popupurl+id,config).then(function(_ref4){var data=_ref4.data;var result=data;setState(function(prevState){return _objectSpread({},prevState,{selected:result});});});case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function openPopup(_x2){return _ref3.apply(this,arguments);};}();var closePopup=function closePopup(){setState(function(prevState){return _objectSpread({},prevState,{selected:{}});});};return React.createElement(\"div\",null,React.createElement(\"main\",null,React.createElement(Search,{handleInput:handleInput,search:search}),React.createElement(\"h4\",null,\"Newest\"),React.createElement(\"h5\",null,\"Oldest\"),React.createElement(\"h6\",null),React.createElement(Results,{results:state.results,openPopup:openPopup}),typeof state.selected.name!=\"undefined\"?React.createElement(Popup,{selected:state.selected,closePopup:closePopup}):false));}export default TabSearchContent;","map":{"version":3,"sources":["/Users/yusenwang/cs498rk/mp2/src/components/TabSearchContent.js"],"names":["React","useState","Search","axios","Results","Popup","qs","utils","TabSearchContent","s","results","selected","state","setState","apiurl","popupurl","search","e","key","getConfig","config","get","then","data","albums","items","console","log","prevState","handleInput","target","value","openPopup","id","result","closePopup","name"],"mappings":"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","sourcesContent":["\nimport React, { useState } from 'react';\nimport Search from './Search'\nimport axios from 'axios'\n\nimport Results from './Results'\nimport Popup from './Popup'\nimport qs from 'querystring'\nimport { utils } from '../Utils'\n\nfunction TabSearchContent(){\n\n    const [state, setState] = useState({\n        s: \"\",\n        results: [],\n        selected: {}\n    }); \n\n    const apiurl = \"https://api.spotify.com/v1/search?\"\n    const popupurl = \"https://api.spotify.com/v1/albums/\"\n\n    const search = async (e) => {\n        \n        if (e.key == \"Enter\"){// user pressed enter, return the result\n            // api request\n            let config = await utils.getConfig();\n            axios.get(apiurl + \"q=\" + state.s + \"&type=album\",config).then(({ data }) => {\n                let results = data.albums.items;\n                console.log(\"finished\");\n                console.log(data.albums.items);\n                setState(prevState => {\n                    return { ... prevState, results: results}\n                })\n            });\n        }\n    }\n\n    \n\n    const handleInput = (e) => {\n        let s = e.target.value;\n        \n        setState(prevState => {\n            return { ...prevState, s: s}\n        });\n    \n    }\n\n    // shows detail page \n    const openPopup = async id => {\n\n        let config = await utils.getConfig();\n        \n        axios(popupurl + id, config).then(({ data }) => {\n            let result = data;\n\n            setState(prevState => {\n            return { ... prevState, selected: result}\n            });\n        });\n    }\n    \n    const closePopup = () => {\n        setState(prevState => {\n            return { ...prevState, selected: {}}\n        });\n    }\n\n    return (\n        <div>\n            <main>\n                <Search handleInput={handleInput} search={search}/>\n                <h4>Newest</h4>\n                <h5>Oldest</h5>\n                <h6></h6>\n                <Results results={state.results} openPopup={openPopup}/>\n\n                {(typeof state.selected.name != \"undefined\") ? <Popup selected={state.selected} closePopup = {closePopup} />: false}\n            </main>\n        </div>\n\n    )\n}\n\n\n\nexport default TabSearchContent;"]},"metadata":{},"sourceType":"module"}